import"../chunks/DsnmJJEf.js";import{o as ge,s as V}from"../chunks/4HMf0vdq.js";import{s as X,h as k,a9 as me,m as le,i as xe,d as be,C as A,V as we,j as ye,H as Ee,k as re,l as Y,w as q,a6 as Te,af as Me,n as W,p as Ae,o as Ce,ag as ve,ah as Ie,ai as Ne,aj as se,ak as Se,t as oe,v as De,al as Re,am as j,ae as de,an as He,ao as Oe,a8 as ke,ap as Le,aq as Ue,ar as Ve,Z as qe,G as ze,as as B,W as Fe,f as L,a as H,K as Pe,X as G,M,P as O,O as E,at as te,I as ne,J as ie}from"../chunks/cX4w2ZgR.js";import{i as J}from"../chunks/BMm9ptVA.js";import{s as Xe}from"../chunks/DmzYJZu7.js";function Ye(i,r){return r}function je(i,r,e){for(var o=i.items,d=[],u=r.length,f=0;f<u;f++)Le(r[f].e,d,!0);var _=u>0&&d.length===0&&e!==null;if(_){var T=e.parentNode;Ue(T),T.append(e),o.clear(),I(i,r[0].prev,r[u-1].next)}Ve(d,()=>{for(var p=0;p<u;p++){var w=r[p];_||(o.delete(w.k),I(i,w.prev,w.next)),de(w.e,!_)}})}function Be(i,r,e,o,d,u=null){var f=i,_={flags:r,items:new Map,first:null};{var T=i;f=k?X(me(T)):T.appendChild(le())}k&&xe();var p=null,w=!1,N=new Map,a=we(()=>{var v=e();return Ie(v)?v:v==null?[]:ve(v)}),t,s;function l(){Ge(s,t,_,N,f,d,r,o,e),u!==null&&(t.length===0?p?oe(p):p=W(()=>u(f)):p!==null&&De(p,()=>{p=null}))}be(()=>{s??=qe,t=A(a);var v=t.length;if(w&&v===0)return;w=v===0;let y=!1;if(k){var g=ye(f)===Ee;g!==(v===0)&&(f=re(),X(f),Y(!1),y=!0)}if(k){for(var n=null,h,c=0;c<v;c++){if(q.nodeType===Te&&q.data===Me){f=q,y=!0,Y(!1);break}var x=t[c],b=o(x,c);h=Z(q,_,n,null,x,b,c,d,r,e),_.items.set(b,h),n=h}v>0&&X(re())}if(k)v===0&&u&&(p=W(()=>u(f)));else if(Ae()){var S=new Set,m=Ce;for(c=0;c<v;c+=1){x=t[c],b=o(x,c);var C=_.items.get(b)??N.get(b);C?fe(C,x,c):(h=Z(null,_,null,null,x,b,c,d,r,e,!0),N.set(b,h)),S.add(b)}for(const[R,D]of _.items)S.has(R)||m.skipped_effects.add(D.e);m.add_callback(l)}else l();y&&Y(!0),A(a)}),k&&(f=q)}function Ge(i,r,e,o,d,u,f,_,T){var p=r.length,w=e.items,N=e.first,a=N,t,s=null,l=[],v=[],y,g,n,h;for(h=0;h<p;h+=1){if(y=r[h],g=_(y,h),n=w.get(g),n===void 0){var c=o.get(g);if(c!==void 0){o.delete(g),w.set(g,c);var x=s?s.next:a;I(e,s,c),I(e,c,x),K(c,x,d),s=c}else{var b=a?a.e.nodes_start:d;s=Z(b,e,s,s===null?e.first:s.next,y,g,h,u,f,T)}w.set(g,s),l=[],v=[],a=s.next;continue}if(fe(n,y,h),(n.e.f&j)!==0&&oe(n.e),n!==a){if(t!==void 0&&t.has(n)){if(l.length<v.length){var S=v[0],m;s=S.prev;var C=l[0],R=l[l.length-1];for(m=0;m<l.length;m+=1)K(l[m],S,d);for(m=0;m<v.length;m+=1)t.delete(v[m]);I(e,C.prev,R.next),I(e,s,C),I(e,R,S),a=S,s=R,h-=1,l=[],v=[]}else t.delete(n),K(n,a,d),I(e,n.prev,n.next),I(e,n,s===null?e.first:s.next),I(e,s,n),s=n;continue}for(l=[],v=[];a!==null&&a.k!==g;)(a.e.f&j)===0&&(t??=new Set).add(a),v.push(a),a=a.next;if(a===null)continue;n=a}l.push(n),s=n,a=n.next}if(a!==null||t!==void 0){for(var D=t===void 0?[]:ve(t);a!==null;)(a.e.f&j)===0&&D.push(a),a=a.next;var U=D.length;if(U>0){var z=p===0?d:null;je(e,D,z)}}i.first=e.first&&e.first.e,i.last=s&&s.e;for(var F of o.values())de(F.e);o.clear()}function fe(i,r,e,o){Se(i.v,r),i.i=e}function Z(i,r,e,o,d,u,f,_,T,p,w){var N=(T&He)!==0,a=(T&Oe)===0,t=N?a?Ne(d,!1,!1):se(d):d,s=(T&Re)===0?f:se(f),l={i:s,v:t,k:u,a:null,e:null,prev:e,next:o};try{if(i===null){var v=document.createDocumentFragment();v.append(i=le())}return l.e=W(()=>_(i,t,s,p),k),l.e.prev=e&&e.e,l.e.next=o&&o.e,e===null?w||(r.first=l):(e.next=l,e.e.next=l.e),o!==null&&(o.prev=l,o.e.prev=l.e),l}finally{}}function K(i,r,e){for(var o=i.next?i.next.e.nodes_start:e,d=r?r.e.nodes_start:e,u=i.e.nodes_start;u!==null&&u!==o;){var f=ke(u);d.before(u),u=f}}function I(i,r,e){r===null?i.first=e:(r.next=e,r.e.next=e&&e.e),e!==null&&(e.prev=r,e.e.prev=r&&r.e)}const Je=!1,ia=Object.freeze(Object.defineProperty({__proto__:null,prerender:Je},Symbol.toStringTag,{value:"Module"}));var Ke=L('<div class="flex items-center justify-center rounded-lg bg-white p-8 shadow"><div class="h-8 w-8 animate-spin rounded-full border-2 border-blue-500 border-t-transparent"></div> <span class="ml-2 text-lg text-gray-600">Loading sessions...</span></div>'),We=L('<div class="rounded-lg bg-red-50 p-6"><p class="text-red-600"> </p></div>'),Ze=L('<div class="rounded-lg bg-white p-8 text-center shadow"><p class="mb-4 text-gray-600">No sessions yet.</p> <a class="text-blue-600 hover:underline" href="/sessions/new">Create your first recording →</a></div>'),$e=L('<a class="block rounded-lg bg-white p-5 shadow hover:shadow-md transition"><div class="flex items-start justify-between"><div><div class="flex items-center gap-3"><span class="font-semibold text-gray-900">Session</span> <span class="font-mono text-sm text-blue-600"> </span></div> <div class="mt-1 text-sm text-gray-600"><span> </span></div></div> <div class="grid grid-cols-2 gap-x-6 gap-y-1 text-sm text-gray-700"><div><strong>Sample Rate:</strong> </div> <div class="col-span-2"><strong>User Agent:</strong> </div></div></div></a>'),Qe=L('<div class="space-y-3"></div>'),ea=L('<div class="min-h-screen bg-gray-50 p-8"><div class="mx-auto max-w-4xl"><div class="mb-6 flex items-center justify-between"><h1 class="text-3xl font-bold text-gray-900">Sessions</h1> <a class="rounded bg-blue-600 px-4 py-2 text-white hover:bg-blue-700" href="/sessions/new">New Recording</a></div> <!></div></div>');function la(i,r){ze(r,!0);let e=B(Fe([])),o=B(!0),d=B(null);ge(async()=>{try{const a=await fetch("/api/sessions");if(!a.ok)throw new Error(`Failed to fetch sessions: ${a.status}`);G(e,await a.json(),!0)}catch(a){G(d,a instanceof Error?a.message:"Unknown error",!0)}finally{G(o,!1)}});const u=a=>new Date(a).toLocaleString(),f=(a,t=80)=>a.length>t?a.slice(0,t-1)+"…":a;var _=ea(),T=M(_),p=O(M(T),2);{var w=a=>{var t=Ke();H(a,t)},N=a=>{var t=te(),s=ne(t);{var l=y=>{var g=We(),n=M(g),h=M(n);E(n),E(g),ie(()=>V(h,`Error: ${A(d)??""}`)),H(y,g)},v=y=>{var g=te(),n=ne(g);{var h=x=>{var b=Ze();H(x,b)},c=x=>{var b=Qe();Be(b,21,()=>A(e),Ye,(S,m)=>{var C=$e(),R=M(C),D=M(R),U=M(D),z=O(M(U),2),F=M(z,!0);E(z),E(U);var $=O(U,2),Q=M($),ue=M(Q);E(Q),E($),E(D);var ee=O(D,2),P=M(ee),ce=O(M(P));E(P);var ae=O(P,2),_e=O(M(ae));E(ae),E(ee),E(R),E(C),ie((pe,he)=>{Xe(C,"href",`/sessions/${A(m).id}`),V(F,A(m).id),V(ue,`Created: ${pe??""}`),V(ce,` ${A(m).sample_rate??""} Hz`),V(_e,` ${he??""}`)},[()=>u(A(m).created_at),()=>f(A(m).user_agent)]),H(S,C)}),E(b),H(x,b)};J(n,x=>{A(e).length===0?x(h):x(c,!1)},!0)}H(y,g)};J(s,y=>{A(d)?y(l):y(v,!1)},!0)}H(a,t)};J(p,a=>{A(o)?a(w):a(N,!1)})}E(T),E(_),H(i,_),Pe()}export{la as component,ia as universal};
